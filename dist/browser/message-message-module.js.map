{"version":3,"sources":["webpack:///./src/app/message/message-routing.module.ts","webpack:///./src/app/message/message.component.css","webpack:///./src/app/message/message.component.html","webpack:///./src/app/message/message.component.ts","webpack:///./src/app/message/message.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAuD;AACd;AACc;AAEvD,IAAM,aAAa,GAAW;IAC5B,EAAC,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,mEAAgB,EAAC;CACxC;AASD;IAAA;IAAkC,CAAC;IAAtB,oBAAoB;QAPhC,8DAAQ,CAAC;YACR,OAAO,EAAC;gBACN,4DAAY,CAAC,QAAQ,CAAC,aAAa,CAAC;aACrC;YACD,OAAO,EAAE,CAAC,4DAAY,CAAC;SACxB,CAAC;OAEW,oBAAoB,CAAE;IAAD,2BAAC;CAAA;AAAF;;;;;;;;;;;;ACfjC,qCAAqC,mBAAmB,qBAAqB,GAAG,WAAW,oBAAoB,mBAAmB,iBAAiB,qBAAqB,GAAG,6BAA6B,iBAAiB,qBAAqB,GAAG,G;;;;;;;;;;;ACAjP,kIAAkI,kCAAkC,KAAK,aAAa,qf;;;;;;;;;;;;;;;;;;;;;;;;;;ACAzH;AACzB;AAEsB;AAU1D;IAKE,0BAAoB,KAAsC;QAAtC,UAAK,GAAL,KAAK,CAAiC;IAAI,CAAC;IAE/D,mCAAQ,GAAR;QAAA,iBAOC;QANC,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;QAEtC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAC,UAAU,CAAC,CAAC;QAC7D,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;YAC1B,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,sEAA8B,EAAE,CAAC;QAC3D,CAAC,EAAC,IAAI,CAAC,CAAC;IACV,CAAC;IAED,8CAAmB,GAAnB,UAAoB,IAAI;QACtB,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACrD,CAAC;IAED,2CAAgB,GAAhB,UAAiB,GAAW;QAC1B,MAAM,CAAC,GAAG,CAAC,IAAI,KAAG,KAAK,IAAE,GAAG,CAAC,KAAK,KAAG,UAAU,CAAC;IAClD,CAAC;IAED,6CAAkB,GAAlB,UAAmB,GAAW;QAC5B,MAAM,CAAC,GAAG,CAAC,IAAI,KAAG,KAAK,IAAE,GAAG,CAAC,KAAK,KAAG,QAAQ,CAAC;IAChD,CAAC;IAED,6CAAkB,GAAlB,UAAmB,GAAW;QAC5B,MAAM,CAAC,GAAG,CAAC,IAAI,KAAG,KAAK,IAAE,GAAG,CAAC,KAAK,KAAG,QAAQ,CAAC;IAChD,CAAC;IAED,yCAAc,GAAd,UAAe,GAAW;QACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,mEAA2B,CAAC,EAAC,KAAK,EAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAC,IAAI,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC;IAClG,CAAC;IAED,yCAAc,GAAd,UAAe,GAAW;QACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,mEAA2B,CAAC,EAAC,KAAK,EAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAC,IAAI,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC;IAClG,CAAC;IAED,sCAAW,GAAX;QACE,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC;YAAA,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACjD,CAAC;IA1CU,gBAAgB;QAL5B,+DAAS,CAAC;YACT,QAAQ,EAAE,aAAa;;;SAGxB,CAAC;yCAM2B,iDAAK;OALrB,gBAAgB,CA4C5B;IAAD,uBAAC;CAAA;AA5C4B;;;;;;;;;;;;;;;;;;;;;;;;;ACbY;AACc;AACA;AACS;AAahE;IAAA;IAA4B,CAAC;IAAhB,aAAa;QAXzB,8DAAQ,CAAC;YACR,YAAY,EAAC;gBACX,mEAAgB;aACjB;YACD,OAAO,EAAC;gBACN,4EAAoB;gBACpB,kEAAY;aACb;YACD,SAAS,EAAC,EAAE;SAEb,CAAC;OACW,aAAa,CAAG;IAAD,oBAAC;CAAA;AAAH","file":"message-message-module.js","sourcesContent":["import { Routes, RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { MessageComponent } from './message.component';\n\nconst messageRoutes: Routes = [\n  {path: '', component: MessageComponent}\n]\n\n@NgModule({\n  imports:[\n    RouterModule.forChild(messageRoutes)\n  ],\n  exports: [RouterModule]\n})\n\nexport class MessageRoutingModule{}\n","module.exports = \".mat-raised-button{\\n  font-size: 75%;\\n  margin-left: 5px;\\n}\\n\\n.inbox{\\n  max-width: 80vw;\\n  margin: 0 auto;\\n  height: 80vh;\\n  overflow-y: auto;\\n}\\n\\n.mat-list .mat-list-item{\\n  height: auto;\\n  line-height: 1.6;\\n}\\n\"","module.exports = \"<div class=\\\"inbox\\\">\\n  <mat-list>\\n    <mat-list-item *ngFor=\\\"let msg of messagesState|async\\\">\\n      <p> {{convertDateToString(msg.created)}} - {{msg.content}}</p>\\n      <button mat-raised-button color=\\\"primary\\\" *ngIf=\\\"showActiveButton(msg)\\\" (click)=\\\"onAcceptFriend(msg)\\\">Accept</button>\\n      <button mat-raised-button color=\\\"warn\\\" *ngIf=\\\"showActiveButton(msg)\\\" (click)=\\\"onRejectFriend(msg)\\\">Reject</button>\\n      <button mat-raised-button disabled *ngIf=\\\"showAcceptedButton(msg)\\\">Accepted!</button>\\n      <button mat-raised-button disabled *ngIf=\\\"showRejectedButton(msg)\\\">Rejected!</button>\\n    </mat-list-item>\\n  </mat-list>\\n</div>\\n\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport * as fromMessage from './store/message.reducers';\nimport * as MessageActions from './store/message.actions';\nimport { skipWhile, take } from 'rxjs/operators';\nimport { Message } from '../models/message.model';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-message',\n  templateUrl: './message.component.html',\n  styleUrls: ['./message.component.css']\n})\nexport class MessageComponent implements OnInit, OnDestroy {\n\n  messagesState: Observable<Message[]>;\n  private timeoutid: any;//should be an timeout id\n\n  constructor(private store: Store<fromMessage.FeatureState>) { }\n\n  ngOnInit() {\n    console.log('message component init');\n\n    this.messagesState = this.store.select('message','messages');\n    this.timeoutid = setTimeout(()=>{\n      this.store.dispatch(new MessageActions.ReadAllMessages())\n    },2000);\n  }\n\n  convertDateToString(date){\n    return (new Date(date)).toString().split('GMT')[0];\n  }\n\n  showActiveButton(msg:Message){\n    return msg.type==='REQ'&&msg.value==='UNDECIDE';\n  }\n\n  showAcceptedButton(msg:Message){\n    return msg.type==='REQ'&&msg.value==='ACCEPT';\n  }\n\n  showRejectedButton(msg:Message){\n    return msg.type==='REQ'&&msg.value==='REJECT';\n  }\n\n  onAcceptFriend(msg:Message){\n    this.store.dispatch(new MessageActions.AcceptFriend({email:msg.from.email,name:msg.from.name}));\n  }\n\n  onRejectFriend(msg:Message){\n    this.store.dispatch(new MessageActions.RejectFriend({email:msg.from.email,name:msg.from.name}));\n  }\n\n  ngOnDestroy(){\n    if(this.timeoutid)clearTimeout(this.timeoutid);\n  }\n\n}\n","import { NgModule } from \"@angular/core\";\nimport { SharedModule } from \"../shared/shared.module\";\nimport { MessageComponent } from \"./message.component\";\nimport { MessageRoutingModule } from \"./message-routing.module\";\n\n@NgModule({\n  declarations:[\n    MessageComponent\n  ],\n  imports:[\n    MessageRoutingModule,\n    SharedModule\n  ],\n  providers:[]\n\n})\nexport class MessageModule {}\n"],"sourceRoot":""}